{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../HBuilder X/HBuilderX.4.87.2025121004/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 自定义导航栏 (适配胶囊按钮) -->\n    <view class=\"custom-nav\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\n      <view class=\"nav-content\">\n        <text class=\"logo\">LightScreen</text>\n        <view class=\"search-entry\" @click=\"goToSearch\">\n          <uni-icons type=\"search\" size=\"18\" color=\"#999\"></uni-icons>\n          <text>发现精彩...</text>\n        </view>\n        <!-- 预留右侧空间给胶囊按钮 -->\n        <view class=\"capsule-placeholder\"></view>\n      </view>\n    </view>\n\n    <scroll-view scroll-y class=\"main-scroll\" @scrolltolower=\"onReachBottom\">\n      <!-- 轮播图 -->\n      <view class=\"banner-section\">\n        <swiper \n          class=\"banner-swiper\" \n          circular \n          autoplay \n          interval=\"5000\" \n          duration=\"800\"\n          previous-margin=\"40rpx\"\n          next-margin=\"40rpx\"\n          @change=\"onBannerChange\"\n        >\n          <swiper-item v-for=\"(item, index) in bannerList\" :key=\"item.id\">\n            <view class=\"banner-card\" :class=\"{ active: currentBanner === index }\" @click=\"handleAction('banner', item)\">\n              <image :src=\"item.pic_url\" mode=\"aspectFill\" class=\"banner-image\" lazy-load></image>\n              <view class=\"banner-info\">\n                <text class=\"banner-title\">{{ item.title }}</text>\n              </view>\n            </view>\n          </swiper-item>\n        </swiper>\n      </view>\n      \n      <!-- 公告栏 -->\n      <view class=\"notice-section\" v-if=\"noticeList.length > 0\">\n        <view class=\"notice-bar\">\n          <uni-icons type=\"notification-filled\" size=\"18\" color=\"#28b389\"></uni-icons>\n          <swiper class=\"notice-swiper\" vertical autoplay circular interval=\"3000\" duration=\"500\">\n            <swiper-item v-for=\"item in noticeList\" :key=\"item.id\">\n              <view class=\"notice-item\" @click=\"showNoticeDetail(item)\">\n                <text class=\"notice-tag\" :class=\"item.type\">{{ getNoticeTag(item.type) }}</text>\n                <text class=\"notice-content\">{{ item.content }}</text>\n              </view>\n            </swiper-item>\n          </swiper>\n          <uni-icons type=\"right\" size=\"14\" color=\"#ccc\"></uni-icons>\n        </view>\n      </view>\n\n      <!-- 快捷功能 -->\n      <view class=\"quick-actions\">\n        <view class=\"action-item\" @click=\"handleAction('random')\">\n          <view class=\"action-icon random\">\n            <uni-icons type=\"refresh\" size=\"24\" color=\"#fff\"></uni-icons>\n          </view>\n          <text>随机抽取</text>\n        </view>\n        <view class=\"action-item\" @click=\"handleAction('hot')\">\n          <view class=\"action-icon hot\">\n            <uni-icons type=\"fire\" size=\"24\" color=\"#fff\"></uni-icons>\n          </view>\n          <text>人气TOP</text>\n        </view>\n        <view class=\"action-item\" @click=\"handleAction('classify')\">\n          <view class=\"action-icon cate\">\n            <uni-icons type=\"list\" size=\"24\" color=\"#fff\"></uni-icons>\n          </view>\n          <text>全部分类</text>\n        </view>\n      </view>\n\n      <!-- 推荐板块 (今日精选) -->\n      <view class=\"section\">\n        <view class=\"section-header\">\n          <view class=\"title-area\">\n            <text class=\"title\">今日精选</text>\n            <view class=\"dot\"></view>\n          </view>\n          <text class=\"more\" @click=\"handleAction('today_more')\">更多</text>\n        </view>\n        <view class=\"wall-grid\">\n          <view \n            class=\"wall-item fade-in-up\" \n            v-for=\"(item, index) in recommendList\" \n            :key=\"item.id\"\n            :style=\"{ animationDelay: index * 0.05 + 's' }\"\n            @click=\"goToPreview(item)\"\n          >\n            <image :src=\"item.pic_url\" mode=\"aspectFill\" class=\"wall-thumb\" lazy-load></image>\n            <view class=\"wall-mask\">\n              <text class=\"wall-name\">{{ item.title }}</text>\n              <view class=\"wall-bottom\">\n                <text class=\"score\">⭐{{ item.score }}</text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 热门分类 -->\n      <view class=\"section\">\n        <view class=\"section-header\">\n          <view class=\"title-area\">\n            <text class=\"title\">热门分类</text>\n            <view class=\"dot\"></view>\n          </view>\n        </view>\n        <view class=\"category-grid\">\n          <view \n            class=\"category-item\" \n            v-for=\"(item, index) in classifyList\" \n            :key=\"item.id\"\n            @click=\"goToClassifyItem(item)\"\n          >\n            <image :src=\"item.cover_url\" mode=\"aspectFill\" class=\"cate-image\" lazy-load></image>\n            <view class=\"cate-mask\">\n              <text class=\"cate-name\">{{ item.name }}</text>\n              <text class=\"cate-count\">{{ item.wall_count }}P</text>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <view class=\"footer-tip\">- 灵感触手可及 -</view>\n      <view class=\"safe-area-bottom\"></view>\n    </scroll-view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { getBannerList, getWallpaperList, getClassifyList, getNoticeList } from '@/api/user/index.js'\nimport { throttle } from '@/utils/common.js'\n\nconst statusBarHeight = ref(uni.getSystemInfoSync().statusBarHeight || 20)\nconst bannerList = ref([])\nconst recommendList = ref([])\nconst classifyList = ref([])\nconst noticeList = ref([])\nconst currentBanner = ref(0)\n\nonMounted(() => {\n  loadData()\n})\n\nasync function loadData() {\n  try {\n    const [banners, walls, categories, notices] = await Promise.all([\n      getBannerList(),\n      getWallpaperList({ type: 'today', pageSize: 12 }),\n      getClassifyList(),\n      getNoticeList()\n    ])\n    \n    bannerList.value = banners.bannerList\n    recommendList.value = walls.list\n    classifyList.value = categories.classifyList\n    noticeList.value = notices.list\n  } catch (error) {\n    console.error('Data load failed:', error)\n  }\n}\n\nfunction onBannerChange(e) {\n  currentBanner.value = e.detail.current\n}\n\nfunction getNoticeTag(type) {\n  const map = {\n    'system': '系统',\n    'update': '更新',\n    'activity': '活动'\n  }\n  return map[type] || '公告'\n}\n\nfunction showNoticeDetail(item) {\n  uni.showModal({\n    title: item.title,\n    content: item.content,\n    showCancel: false,\n    confirmText: '我知道了'\n  })\n}\n\nconst handleAction = throttle((type, data) => {\n  switch(type) {\n    case 'banner':\n      uni.navigateTo({ url: data.jump_url });\n      break;\n    case 'random':\n      uni.navigateTo({ url: `/pages/preview/preview?type=random` });\n      break;\n    case 'hot':\n      uni.navigateTo({ url: `/pages/wallpaper/list?type=hot` });\n      break;\n    case 'classify':\n      uni.switchTab({ url: '/pages/classify/classify' });\n      break;\n    case 'today_more':\n      uni.navigateTo({ url: `/pages/wallpaper/list?type=today` });\n      break;\n  }\n}, 800)\n\nfunction goToPreview(item) {\n  uni.navigateTo({ url: `/pages/preview/preview?id=${item.id}&type=today` })\n}\n\nfunction goToSearch() {\n  uni.navigateTo({ url: '/pages/search/search' })\n}\n\nfunction goToClassifyItem(item) {\n  uni.navigateTo({ url: `/pages/wallpaper/list?id=${item.id}&name=${item.name}` })\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  background-color: #fff;\n  min-height: 100vh;\n}\n\n.custom-nav {\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  background: #fff;\n  padding: 0 30rpx 10rpx;\n  \n  .nav-content {\n    display: flex;\n    align-items: center;\n    height: 88rpx;\n  }\n  \n  .logo {\n    font-size: 36rpx;\n    font-weight: 900;\n    color: #1a1a1a;\n    letter-spacing: -2rpx;\n    margin-right: 20rpx;\n  }\n  \n  .search-entry {\n    flex: 1;\n    height: 72rpx;\n    background: #f5f7f9;\n    border-radius: 36rpx;\n    display: flex;\n    align-items: center;\n    padding: 0 24rpx;\n    font-size: 26rpx;\n    color: #999;\n    \n    text { margin-left: 10rpx; }\n  }\n  \n  .capsule-placeholder {\n    width: 200rpx;\n  }\n}\n\n.main-scroll {\n  height: calc(100vh - 100rpx);\n}\n\n.banner-section {\n  padding: 20rpx 0 10rpx;\n  .banner-swiper { height: 380rpx; }\n  .banner-card {\n    height: 360rpx;\n    margin: 0 10rpx;\n    border-radius: 32rpx;\n    overflow: hidden;\n    position: relative;\n    transition: transform 0.4s ease;\n    transform: scale(0.9);\n    background: #f8f9fa;\n    box-shadow: 0 10rpx 30rpx rgba(0,0,0,0.05);\n    \n    &.active { transform: scale(1); }\n    .banner-image { width: 100%; height: 100%; }\n    .banner-info {\n      position: absolute;\n      bottom: 0; left: 0; right: 0;\n      padding: 30rpx;\n      background: linear-gradient(to top, rgba(0,0,0,0.4), transparent);\n      .banner-title { color: #fff; font-size: 28rpx; font-weight: 700; }\n    }\n  }\n}\n\n.notice-section {\n  padding: 0 40rpx;\n  margin-bottom: 20rpx;\n  .notice-bar {\n    background: #fdfdfd;\n    border-radius: 20rpx;\n    height: 72rpx;\n    padding: 0 24rpx;\n    display: flex;\n    align-items: center;\n    gap: 16rpx;\n    box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.02);\n    border: 1px solid #f9f9f9;\n    \n    .notice-swiper {\n      flex: 1;\n      height: 100%;\n      .notice-item {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        gap: 12rpx;\n        \n        .notice-tag {\n          font-size: 18rpx;\n          padding: 2rpx 10rpx;\n          border-radius: 6rpx;\n          font-weight: 800;\n          flex-shrink: 0;\n          &.system { background: rgba(40,179,137,0.1); color: #28b389; }\n          &.update { background: rgba(52,152,219,0.1); color: #3498db; }\n          &.activity { background: rgba(243,156,18,0.1); color: #f39c12; }\n        }\n        \n        .notice-content {\n          font-size: 24rpx;\n          color: #666;\n          @include text-ellipsis;\n          font-weight: 500;\n        }\n      }\n    }\n  }\n}\n\n.quick-actions {\n  display: flex;\n  justify-content: space-around;\n  padding: 30rpx;\n  \n  .action-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 16rpx;\n    \n    .action-icon {\n      width: 100rpx;\n      height: 100rpx;\n      border-radius: 36rpx;\n      @include flex-center;\n      box-shadow: 0 8rpx 20rpx rgba(0,0,0,0.06);\n      \n      &.random { background: $brand-gradient; }\n      &.hot { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); }\n      &.cate { background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%); }\n    }\n    \n    text { font-size: 24rpx; color: #1a1a1a; font-weight: 700; }\n  }\n}\n\n.section {\n  margin-bottom: 50rpx;\n  .section-header {\n    padding: 0 40rpx;\n    @include flex-between;\n    margin-bottom: 30rpx;\n    .title-area {\n      display: flex;\n      align-items: center;\n      gap: 12rpx;\n      .title { font-size: 38rpx; font-weight: 900; color: #1a1a1a; }\n      .dot { width: 10rpx; height: 10rpx; background: $brand-color; border-radius: 50%; }\n    }\n    .more { font-size: 24rpx; color: #ccc; }\n  }\n}\n\n.wall-grid {\n  padding: 0 30rpx;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 15rpx;\n  \n  .wall-item {\n    height: 380rpx;\n    border-radius: 20rpx;\n    overflow: hidden;\n    position: relative;\n    background: #f8f9fa;\n    \n    .wall-thumb { width: 100%; height: 100%; }\n    .wall-mask {\n      position: absolute;\n      inset: 0;\n      background: linear-gradient(to top, rgba(0,0,0,0.3), transparent);\n      padding: 15rpx;\n      display: flex;\n      flex-direction: column;\n      justify-content: flex-end;\n      \n      .wall-name { color: #fff; font-size: 20rpx; @include text-ellipsis; font-weight: 600; }\n      .wall-bottom {\n        @include flex-between;\n        margin-top: 4rpx;\n        .score { color: #ffd700; font-size: 18rpx; font-weight: 800; }\n      }\n    }\n  }\n}\n\n.category-grid {\n  padding: 0 30rpx;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 20rpx;\n  \n  .category-item {\n    height: 180rpx;\n    border-radius: 24rpx;\n    overflow: hidden;\n    position: relative;\n    box-shadow: $shadow-sm;\n    \n    .cate-image { width: 100%; height: 100%; }\n    .cate-mask {\n      position: absolute;\n      inset: 0;\n      background: rgba(0,0,0,0.2);\n      @include flex-center;\n      flex-direction: column;\n      gap: 4rpx;\n      \n      .cate-name { color: #fff; font-size: 30rpx; font-weight: 800; }\n      .cate-count { color: rgba(255,255,255,0.8); font-size: 18rpx; font-weight: 600; }\n    }\n  }\n}\n\n.footer-tip { text-align: center; font-size: 24rpx; color: #eee; padding: 60rpx 0; }\n.safe-area-bottom { height: env(safe-area-inset-bottom); }\n</style>","import MiniProgramPage from 'D:/HBuilderPrograms/qingpingWallapaper/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onMounted","getBannerList","getWallpaperList","getClassifyList","getNoticeList","throttle"],"mappings":";;;;;;;;;;;;;;;AA4IA,UAAM,kBAAkBA,cAAG,IAACC,cAAG,MAAC,kBAAiB,EAAG,mBAAmB,EAAE;AACzE,UAAM,aAAaD,cAAG,IAAC,EAAE;AACzB,UAAM,gBAAgBA,cAAG,IAAC,EAAE;AAC5B,UAAM,eAAeA,cAAG,IAAC,EAAE;AAC3B,UAAM,aAAaA,cAAG,IAAC,EAAE;AACzB,UAAM,gBAAgBA,cAAG,IAAC,CAAC;AAE3BE,kBAAAA,UAAU,MAAM;AACd,eAAU;AAAA,IACZ,CAAC;AAED,mBAAe,WAAW;AACxB,UAAI;AACF,cAAM,CAAC,SAAS,OAAO,YAAY,OAAO,IAAI,MAAM,QAAQ,IAAI;AAAA,UAC9DC,6BAAe;AAAA,UACfC,eAAAA,iBAAiB,EAAE,MAAM,SAAS,UAAU,GAAE,CAAE;AAAA,UAChDC,+BAAiB;AAAA,UACjBC,6BAAe;AAAA,QACrB,CAAK;AAED,mBAAW,QAAQ,QAAQ;AAC3B,sBAAc,QAAQ,MAAM;AAC5B,qBAAa,QAAQ,WAAW;AAChC,mBAAW,QAAQ,QAAQ;AAAA,MAC5B,SAAQ,OAAO;AACdL,sBAAAA,MAAA,MAAA,SAAA,gCAAc,qBAAqB,KAAK;AAAA,MACzC;AAAA,IACH;AAEA,aAAS,eAAe,GAAG;AACzB,oBAAc,QAAQ,EAAE,OAAO;AAAA,IACjC;AAEA,aAAS,aAAa,MAAM;AAC1B,YAAM,MAAM;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,QACV,YAAY;AAAA,MACb;AACD,aAAO,IAAI,IAAI,KAAK;AAAA,IACtB;AAEA,aAAS,iBAAiB,MAAM;AAC9BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO,KAAK;AAAA,QACZ,SAAS,KAAK;AAAA,QACd,YAAY;AAAA,QACZ,aAAa;AAAA,MACjB,CAAG;AAAA,IACH;AAEA,UAAM,eAAeM,aAAQ,SAAC,CAAC,MAAM,SAAS;AAC5C,cAAO,MAAI;AAAA,QACT,KAAK;AACHN,wBAAG,MAAC,WAAW,EAAE,KAAK,KAAK,SAAU,CAAA;AACrC;AAAA,QACF,KAAK;AACHA,wBAAG,MAAC,WAAW,EAAE,KAAK,qCAAsC,CAAA;AAC5D;AAAA,QACF,KAAK;AACHA,wBAAG,MAAC,WAAW,EAAE,KAAK,iCAAkC,CAAA;AACxD;AAAA,QACF,KAAK;AACHA,wBAAAA,MAAI,UAAU,EAAE,KAAK,2BAA4B,CAAA;AACjD;AAAA,QACF,KAAK;AACHA,wBAAG,MAAC,WAAW,EAAE,KAAK,mCAAoC,CAAA;AAC1D;AAAA,MACH;AAAA,IACH,GAAG,GAAG;AAEN,aAAS,YAAY,MAAM;AACzBA,0BAAI,WAAW,EAAE,KAAK,6BAA6B,KAAK,EAAE,eAAe;AAAA,IAC3E;AAEA,aAAS,aAAa;AACpBA,oBAAAA,MAAI,WAAW,EAAE,KAAK,uBAAsB,CAAE;AAAA,IAChD;AAEA,aAAS,iBAAiB,MAAM;AAC9BA,oBAAAA,MAAI,WAAW,EAAE,KAAK,4BAA4B,KAAK,EAAE,SAAS,KAAK,IAAI,GAAE,CAAE;AAAA,IACjF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5NA,GAAG,WAAW,eAAe;"}