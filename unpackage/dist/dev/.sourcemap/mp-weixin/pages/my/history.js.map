{"version":3,"file":"history.js","sources":["pages/my/history.vue","../../HBuilder X/HBuilderX.4.87.2025121004/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvaGlzdG9yeS52dWU"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"header\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\n      <view class=\"header-inner\">\n        <view class=\"back-btn\" @click=\"goBack\">\n          <uni-icons type=\"left\" size=\"24\" color=\"#1a1a1a\"></uni-icons>\n        </view>\n        <text class=\"title\">浏览历史</text>\n        <text class=\"clear-btn\" v-if=\"history.length\" @click=\"doClear\">清空</text>\n        <view class=\"capsule-placeholder\"></view>\n      </view>\n    </view>\n\n    <scroll-view scroll-y class=\"main\">\n      <view class=\"timeline\" v-if=\"history.length\">\n        <view \n          class=\"history-card fade-in-up\" \n          v-for=\"(item, index) in history\" \n          :key=\"item.id + index\"\n          :style=\"{ animationDelay: index * 0.05 + 's' }\"\n          @click=\"goToPreview(item)\"\n        >\n          <view class=\"time-dot\"></view>\n          <image :src=\"item.pic_url\" mode=\"aspectFill\" class=\"thumb\"></image>\n          <view class=\"info\">\n            <text class=\"name\">{{ item.title }}</text>\n            <text class=\"time\">{{ formatTime(item.viewTime) }}</text>\n          </view>\n          <uni-icons type=\"right\" size=\"14\" color=\"#ccc\"></uni-icons>\n        </view>\n      </view>\n\n      <view class=\"empty-state\" v-else>\n        <view class=\"empty-icon-box\">\n          <uni-icons type=\"calendar\" size=\"100\" color=\"#e0e0e0\"></uni-icons>\n        </view>\n        <text class=\"t1\">记忆是空白的</text>\n        <text class=\"t2\">你浏览过的壁纸都会出现在这里</text>\n        <view class=\"go-btn\" @click=\"goHome\">去逛逛</view>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script setup>\nimport { computed, ref } from 'vue'\nimport { useUserStore } from '@/stores/user'\n\nconst userStore = useUserStore()\nconst statusBarHeight = ref(uni.getSystemInfoSync().statusBarHeight || 20)\nconst history = computed(() => userStore.history)\n\nfunction goBack() { uni.navigateBack() }\nfunction goHome() { uni.switchTab({ url: '/pages/index/index' }) }\nfunction goToPreview(item) { uni.navigateTo({ url: `/pages/preview/preview?id=${item.id}&type=history` }) }\n\nfunction doClear() {\n  uni.showModal({\n    title: '清空历史',\n    content: '确定要删除所有浏览记录吗？',\n    success: (res) => {\n      if (res.confirm) {\n        userStore.clearHistory()\n      }\n    }\n  })\n}\n\nfunction formatTime(ts) {\n  if (!ts) return ''\n  const d = new Date(ts)\n  return `${d.getHours().toString().padStart(2,'0')}:${d.getMinutes().toString().padStart(2,'0')}`\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container { height: 100vh; background: #fff; display: flex; flex-direction: column; }\n.header {\n  background: #fff; z-index: 10;\n  .header-inner {\n    height: 88rpx; padding: 0 30rpx; @include flex-between;\n    .back-btn { width: 80rpx; @include flex-center; }\n    .title { font-size: 34rpx; font-weight: 800; color: #1a1a1a; flex: 1; text-align: center; margin-left: 80rpx; }\n    .clear-btn { font-size: 26rpx; color: #999; margin-right: 20rpx; width: 80rpx; text-align: center; }\n    .capsule-placeholder { width: 180rpx; }\n  }\n}\n.main { flex: 1; }\n.timeline {\n  padding: 40rpx; position: relative;\n  &::before { content: ''; position: absolute; left: 54rpx; top: 60rpx; bottom: 40rpx; width: 2rpx; background: #eee; }\n}\n.history-card {\n  display: flex; align-items: center; gap: 30rpx; margin-bottom: 40rpx; position: relative;\n  background: #fff; padding: 20rpx; border-radius: 24rpx; box-shadow: $shadow-sm;\n  .time-dot {\n    position: absolute; left: -20rpx; top: 50%; transform: translateY(-50%);\n    width: 14rpx; height: 14rpx; background: $brand-color; border-radius: 50%; border: 4rpx solid #fff; z-index: 2;\n  }\n  .thumb { width: 100rpx; height: 140rpx; border-radius: 12rpx; background: #f8f9fa; }\n  .info { flex: 1; .name { font-size: 28rpx; font-weight: 700; color: #333; display: block; margin-bottom: 8rpx; } .time { font-size: 22rpx; color: #999; } }\n}\n.empty-state {\n  padding: 200rpx 60rpx; @include flex-center; flex-direction: column;\n  .empty-icon-box { margin-bottom: 40rpx; opacity: 0.8; }\n  .t1 { font-size: 32rpx; font-weight: 700; color: #333; }\n  .t2 { font-size: 24rpx; color: #999; margin-top: 10rpx; margin-bottom: 60rpx; }\n  .go-btn { padding: 20rpx 60rpx; background: $brand-gradient; color: #fff; border-radius: 40rpx; font-size: 28rpx; font-weight: 600; }\n}\n</style>\n","import MiniProgramPage from 'D:/HBuilderPrograms/qingpingWallapaper/pages/my/history.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","ref","uni","computed"],"mappings":";;;;;;;;;;;;;;AAgDA,UAAM,YAAYA,YAAAA,aAAc;AAChC,UAAM,kBAAkBC,cAAG,IAACC,cAAG,MAAC,kBAAiB,EAAG,mBAAmB,EAAE;AACzE,UAAM,UAAUC,cAAQ,SAAC,MAAM,UAAU,OAAO;AAEhD,aAAS,SAAS;AAAED,0BAAI;IAAgB;AACxC,aAAS,SAAS;AAAEA,oBAAAA,MAAI,UAAU,EAAE,KAAK,qBAAoB,CAAE;AAAA,IAAG;AAClE,aAAS,YAAY,MAAM;AAAEA,oBAAG,MAAC,WAAW,EAAE,KAAK,6BAA6B,KAAK,EAAE,gBAAiB,CAAA;AAAA,IAAG;AAE3G,aAAS,UAAU;AACjBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,sBAAU,aAAc;AAAA,UACzB;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAEA,aAAS,WAAW,IAAI;AACtB,UAAI,CAAC;AAAI,eAAO;AAChB,YAAM,IAAI,IAAI,KAAK,EAAE;AACrB,aAAO,GAAG,EAAE,SAAQ,EAAG,WAAW,SAAS,GAAE,GAAG,CAAC,IAAI,EAAE,WAAU,EAAG,SAAQ,EAAG,SAAS,GAAE,GAAG,CAAC;AAAA,IAChG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvEA,GAAG,WAAW,eAAe;"}