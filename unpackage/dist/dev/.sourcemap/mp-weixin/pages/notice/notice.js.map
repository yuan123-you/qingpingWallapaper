{"version":3,"file":"notice.js","sources":["pages/notice/notice.vue","../../HBuilder X/HBuilderX.4.87.2025121004/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbm90aWNlL25vdGljZS52dWU"],"sourcesContent":["<template>\n  <view class=\"page-bg\">\n    <view class=\"notice-container\">\n      <view class=\"notice-header\">\n        <text class=\"notice-title\">ðŸ“¢ å…¬å‘Š</text>\n      </view>\n\n      <scroll-view class=\"notice-scroll\" scroll-y @scrolltolower=\"loadMore\" :show-scrollbar=\"false\">\n        <view class=\"notice-list\">\n          <view \n            class=\"notice-item\" \n            v-for=\"(item, index) in noticeList\" \n            :key=\"item.id\"\n            @click=\"goToNoticeDetail(item)\"\n          >\n            <view class=\"notice-icon-wrapper\">\n              <text class=\"notice-type-icon\">{{ getTypeIcon(item.type) }}</text>\n            </view>\n            <view class=\"notice-content\">\n              <text class=\"notice-title\">{{ item.title }}</text>\n              <text class=\"notice-time\">{{ formatTime(item.create_time) }}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"loading-more\" v-if=\"loading\">\n          <view class=\"loading-spinner\"></view>\n          <text>åŠ è½½ä¸­...</text>\n        </view>\n        \n        <view class=\"no-more\" v-if=\"!hasMore && noticeList.length > 0\">\n          <text>æ²¡æœ‰æ›´å¤šäº†</text>\n        </view>\n        \n        <view class=\"empty\" v-if=\"noticeList.length === 0 && !loading\">\n          <text class=\"empty-icon\">ðŸ“­</text>\n          <text class=\"empty-text\">æš‚æ— å…¬å‘Š</text>\n        </view>\n      </scroll-view>\n    </view>\n    <view class=\"safe-area-bottom\"></view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { getNoticeList } from '@/api/user/index.js'\n\nconst noticeList = ref([])\nconst loading = ref(false)\nconst hasMore = ref(true)\nconst pageNum = ref(1)\nconst pageSize = 10\n\nonMounted(() => {\n  loadNotice()\n})\n\nasync function loadNotice(refresh = false) {\n  if (loading.value) return\n  \n  loading.value = true\n  \n  try {\n    const currentPageNum = refresh ? 1 : pageNum.value\n    const res = await getNoticeList('', currentPageNum, pageSize)\n    \n    if (res && res.list) {\n      if (refresh) {\n        noticeList.value = res.list\n        pageNum.value = 1\n      } else {\n        noticeList.value = [...noticeList.value, ...res.list]\n      }\n      \n      hasMore.value = res.list.length >= pageSize\n    }\n  } catch (error) {\n    console.error('åŠ è½½å…¬å‘Šå¤±è´¥:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction goToNoticeDetail(item) {\n  uni.navigateTo({\n    url: `/pages/notice/detail?id=${item.id}`\n  })\n}\n\nfunction loadMore() {\n  if (!hasMore.value || loading.value) return\n  pageNum.value++\n  loadNotice()\n}\n\nfunction getTypeIcon(type) {\n  const icons = {\n    system: 'ðŸ“¢',\n    update: 'ðŸ“¢',\n    activity: 'ðŸŽ‰'\n  }\n  return icons[type] || 'ðŸ“¢'\n}\n\nfunction formatTime(timestamp) {\n  if (!timestamp) return ''\n  \n  const date = new Date(timestamp * 1000)\n  const now = new Date()\n  const diff = now - date\n  \n  if (diff < 60000) {\n    return 'åˆšåˆš'\n  } else if (diff < 3600000) {\n    return Math.floor(diff / 60000) + 'å°æ—¶å‰'\n  } else if (diff < 86400000) {\n    return Math.floor(diff / 86400000) + 'å¤©å‰'\n  } else if (diff < 2592000000) {\n    return Math.floor(diff / 2592000000) + 'æœˆå‰'\n  } else {\n    return Math.floor(diff / 2592000000) + 'å¹´å‰'\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.page-bg {\n  background: linear-gradient(135deg, #f5f7fa 0%, #e8f5e9 100%);\n  min-height: 100vh;\n}\n\n.notice-container {\n  min-height: 100vh;\n  background: transparent;\n}\n\n.notice-header {\n  padding: 30rpx;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20rpx);\n  text-align: center;\n}\n\n.notice-title {\n  font-size: 36rpx;\n  font-weight: 700;\n  color: #333;\n}\n\n.notice-scroll {\n  height: calc(100vh - 200rpx);\n}\n\n.notice-list {\n  padding: 20rpx 30rpx;\n}\n\n.notice-item {\n  display: flex;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20rpx);\n  border-radius: 20rpx;\n  margin-bottom: 20rpx;\n  padding: 24rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\n  transition: all 0.3s ease;\n\n  &:active {\n    transform: translateY(-4rpx);\n    box-shadow: 0 8rpx 20rpx rgba(0, 0, 0, 0.15);\n  }\n}\n\n.notice-icon-wrapper {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.notice-type-icon {\n  font-size: 40rpx;\n}\n\n.notice-content {\n  flex: 1;\n  padding-left: 24rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.notice-title {\n  font-size: 30rpx;\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 8rpx;\n}\n\n.notice-time {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.loading-more {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40rpx;\n  gap: 16rpx;\n}\n\n.loading-spinner {\n  width: 40rpx;\n  height: 40rpx;\n  border: 4rpx solid rgba(102, 126, 234, 0.3);\n  border-top-color: #667eea;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.no-more,\n.empty {\n  text-align: center;\n  padding: 60rpx 30rpx;\n}\n\n.empty-icon {\n  font-size: 120rpx;\n  margin-bottom: 20rpx;\n  opacity: 0.5;\n}\n\n.empty-text {\n  font-size: 28rpx;\n  color: #999;\n  display: block;\n}\n\n.no-more text,\n.loading-more text,\n.empty text {\n  color: #999;\n  font-size: 24rpx;\n}\n\n.safe-area-bottom {\n  height: constant(safe-area-inset-bottom);\n  height: env(safe-area-inset-bottom);\n}\n</style>","import MiniProgramPage from 'D:/HBuilderPrograms/qingpingWallapaper/pages/notice/notice.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","getNoticeList","uni"],"mappings":";;;AAoDA,MAAM,WAAW;;;;AAJjB,UAAM,aAAaA,cAAG,IAAC,EAAE;AACzB,UAAM,UAAUA,cAAG,IAAC,KAAK;AACzB,UAAM,UAAUA,cAAG,IAAC,IAAI;AACxB,UAAM,UAAUA,cAAG,IAAC,CAAC;AAGrBC,kBAAAA,UAAU,MAAM;AACd,iBAAY;AAAA,IACd,CAAC;AAED,mBAAe,WAAW,UAAU,OAAO;AACzC,UAAI,QAAQ;AAAO;AAEnB,cAAQ,QAAQ;AAEhB,UAAI;AACF,cAAM,iBAAiB,UAAU,IAAI,QAAQ;AAC7C,cAAM,MAAM,MAAMC,eAAAA,cAAc,IAAI,gBAAgB,QAAQ;AAE5D,YAAI,OAAO,IAAI,MAAM;AACnB,cAAI,SAAS;AACX,uBAAW,QAAQ,IAAI;AACvB,oBAAQ,QAAQ;AAAA,UACxB,OAAa;AACL,uBAAW,QAAQ,CAAC,GAAG,WAAW,OAAO,GAAG,IAAI,IAAI;AAAA,UACrD;AAED,kBAAQ,QAAQ,IAAI,KAAK,UAAU;AAAA,QACpC;AAAA,MACF,SAAQ,OAAO;AACdC,sBAAAA,MAAA,MAAA,SAAA,iCAAc,WAAW,KAAK;AAAA,MAClC,UAAY;AACR,gBAAQ,QAAQ;AAAA,MACjB;AAAA,IACH;AAEA,aAAS,iBAAiB,MAAM;AAC9BA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,2BAA2B,KAAK,EAAE;AAAA,MAC3C,CAAG;AAAA,IACH;AAEA,aAAS,WAAW;AAClB,UAAI,CAAC,QAAQ,SAAS,QAAQ;AAAO;AACrC,cAAQ;AACR,iBAAY;AAAA,IACd;AAEA,aAAS,YAAY,MAAM;AACzB,YAAM,QAAQ;AAAA,QACZ,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,UAAU;AAAA,MACX;AACD,aAAO,MAAM,IAAI,KAAK;AAAA,IACxB;AAEA,aAAS,WAAW,WAAW;AAC7B,UAAI,CAAC;AAAW,eAAO;AAEvB,YAAM,OAAO,IAAI,KAAK,YAAY,GAAI;AACtC,YAAM,MAAM,oBAAI,KAAM;AACtB,YAAM,OAAO,MAAM;AAEnB,UAAI,OAAO,KAAO;AAChB,eAAO;AAAA,MACX,WAAa,OAAO,MAAS;AACzB,eAAO,KAAK,MAAM,OAAO,GAAK,IAAI;AAAA,MACtC,WAAa,OAAO,OAAU;AAC1B,eAAO,KAAK,MAAM,OAAO,KAAQ,IAAI;AAAA,MACzC,WAAa,OAAO,QAAY;AAC5B,eAAO,KAAK,MAAM,OAAO,MAAU,IAAI;AAAA,MAC3C,OAAS;AACL,eAAO,KAAK,MAAM,OAAO,MAAU,IAAI;AAAA,MACxC;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;AC1HA,GAAG,WAAW,eAAe;"}