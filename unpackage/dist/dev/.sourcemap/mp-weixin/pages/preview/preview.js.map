{"version":3,"file":"preview.js","sources":["pages/preview/preview.vue","../../HBuilder X/HBuilderX.4.87.2025121004/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJldmlldy9wcmV2aWV3LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"preview-page\" @touchmove.stop.prevent=\"() => {}\">\n    <!-- 全屏 Swiper (左右滑动) -->\n    <!-- 增加 vertical=\"false\" 确保明确横向滑动 -->\n    <!-- 增加 v-if 确保数据就绪后再渲染，防止初始闪烁 -->\n    <swiper \n      v-if=\"isReady && list.length > 0\"\n      class=\"full-swiper\" \n      :current=\"currentSwiperIndex\" \n      @change=\"onSwiperChange\"\n      :duration=\"300\"\n      circular\n      :vertical=\"false\"\n    >\n      <swiper-item v-for=\"(item, index) in list\" :key=\"item.id\">\n        <!-- 使用 scroll-view 包裹以防止图片显示不全，但要禁用滚动 -->\n        <view class=\"wall-container\">\n          <!-- 只有在加载中才显示模糊占位图 -->\n          <image \n            v-if=\"shouldRender(index) && imageLoading[index]\"\n            class=\"blur-placeholder\" \n            :src=\"getSmallUrl(item.pic_url)\" \n            mode=\"aspectFill\"\n          ></image>\n\n          <!-- 高清主图 -->\n          <image \n            v-if=\"shouldRender(index) && !imageError[index]\"\n            class=\"full-image\" \n            :src=\"item.pic_url\" \n            mode=\"aspectFill\"\n            @load=\"onImageLoad(index)\"\n            @error=\"onImageError(index)\"\n          ></image>\n\n          <!-- 加载失败提示 -->\n          <view \n            v-if=\"shouldRender(index) && imageError[index]\" \n            class=\"error-placeholder\"\n            @click=\"retryLoadImage(index, item.pic_url)\"\n          >\n            <view class=\"error-icon\">\n              <uni-icons type=\"image\" size=\"60\" color=\"#666\"></uni-icons>\n            </view>\n            <text class=\"error-text\">图片加载失败</text>\n            <text class=\"retry-text\">点击重试</text>\n          </view>\n\n          <!-- 唯一标识 - 仅在信息面板呼出时显示 -->\n          <view class=\"wallpaper-id\" v-show=\"showInfo\">ID: {{ item.id }}</view>\n          \n          <view class=\"loading-state\" v-if=\"shouldRender(index) && imageLoading[index]\">\n            <view class=\"spinner\"></view>\n          </view>\n\n          <!-- 内容蒙层 -->\n          <view class=\"content-overlay\" @click=\"toggleInfo\">\n            <view class=\"top-gradient\" v-show=\"showInfo\"></view>\n            <view class=\"bottom-gradient\" v-show=\"showInfo\"></view>\n            \n            <!-- 顶部导航 & 计数器 -->\n            <view class=\"nav-bar\" v-show=\"showInfo\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\n              <view class=\"back-btn\" @click.stop=\"goBack\">\n                <uni-icons type=\"left\" size=\"24\" color=\"#fff\"></uni-icons>\n              </view>\n              \n              <!-- 数量显示 -->\n              <view class=\"counter-badge\">\n                <text class=\"curr\">{{ currentSwiperIndex + 1 }}</text>\n                <text class=\"divider\">/</text>\n                <text class=\"total\">{{ totalCount }}</text>\n              </view>\n            </view>\n\n            <!-- 侧边操作栏 -->\n            <view class=\"side-actions\" v-show=\"showInfo\">\n              <view class=\"action-item\" @click.stop=\"handleFavorite(item)\">\n                <view class=\"icon-box\" :class=\"{ active: isFavorite(item.id) }\">\n                  <uni-icons :type=\"isFavorite(item.id) ? 'heart-filled' : 'heart'\" size=\"28\" :color=\"isFavorite(item.id) ? '#ff4757' : '#fff'\"></uni-icons>\n                </view>\n                <text>{{ isFavorite(item.id) ? '已收' : '收藏' }}</text>\n              </view>\n              <view class=\"action-item\" @click.stop=\"handleDownload(item)\">\n                <view class=\"icon-box\">\n                  <uni-icons type=\"download\" size=\"28\" color=\"#fff\"></uni-icons>\n                </view>\n                <text>下载</text>\n              </view>\n            </view>\n\n            <!-- 底部详情面板 -->\n            <view class=\"bottom-panel\" v-show=\"showInfo\">\n              <view class=\"panel-header\">\n                <view class=\"left\">\n                  <text class=\"title\">{{ item.title }}</text>\n                  <view class=\"tags\">\n                    <text v-for=\"tag in item.tags\" :key=\"tag\">#{{ tag }}</text>\n                  </view>\n                </view>\n                <view class=\"score-badge\">⭐ {{ item.score }}</view>\n              </view>\n              \n              <text class=\"desc\">{{ item.description }}</text>\n              <view class=\"swipe-tip\">左右滑动发现更多</view>\n            </view>\n          </view>\n        </view>\n      </swiper-item>\n    </swiper>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { getWallpaperList } from '@/api/user/index.js'\nimport { useUserStore } from '@/stores/user'\nimport { throttle } from '@/utils/common.js'\n\nconst userStore = useUserStore()\nconst statusBarHeight = ref(uni.getSystemInfoSync().statusBarHeight || 20)\n\nconst list = ref([])\nconst totalCount = ref(0)\nconst currentSwiperIndex = ref(0)\nconst imageLoading = ref({})\nconst imageError = ref({})\nconst isReady = ref(false)\nconst initImageLoading = (total) => {\n  const loadingMap = {}\n  const errorMap = {}\n  for (let i = 0; i < total; i++) {\n    loadingMap[i] = true\n    errorMap[i] = false\n  }\n  imageLoading.value = loadingMap\n  imageError.value = errorMap\n}\nconst showInfo = ref(false)\n\n// 分页状态\nconst pageNum = ref(1)\nconst pageSize = 10\nconst hasMore = ref(true)\nconst paramsRec = ref({}) // 记录请求参数\n\nonMounted(() => {\n  const pages = getCurrentPages()\n  const options = pages[pages.length - 1].options\n  \n  paramsRec.value = {\n    id: options.id,\n    type: options.type,\n    categoryId: options.categoryId\n  }\n  \n  loadData(true)\n})\n\nasync function loadData(firstLoad = false) {\n  if (!hasMore.value && !firstLoad) return\n\n  try {\n    const res = await getWallpaperList({ \n      type: paramsRec.value.type, \n      categoryId: paramsRec.value.categoryId,\n      pageNum: pageNum.value, \n      pageSize: pageSize \n    })\n    \n    if (firstLoad) {\n      list.value = res.list\n      totalCount.value = res.total\n      initImageLoading(res.total)\n      \n      let targetIndex = -1\n      \n      if (paramsRec.value.id) {\n        targetIndex = list.value.findIndex(item => item.id == paramsRec.value.id)\n        \n        while (targetIndex === -1 && hasMore.value) {\n          pageNum.value++\n          if (list.value.length >= res.total) {\n            hasMore.value = false\n            break\n          }\n          \n          const nextRes = await getWallpaperList({ \n            type: paramsRec.value.type, \n            categoryId: paramsRec.value.categoryId,\n            pageNum: pageNum.value, \n            pageSize: pageSize \n          })\n          \n          list.value = [...list.value, ...nextRes.list]\n          targetIndex = list.value.findIndex(item => item.id == paramsRec.value.id)\n          \n          if (list.value.length >= nextRes.total || nextRes.list.length < pageSize) {\n            hasMore.value = false\n          }\n        }\n        \n        if (targetIndex !== -1) {\n          currentSwiperIndex.value = targetIndex\n        }\n      }\n      \n      isReady.value = true\n    } else {\n      const newList = [...list.value, ...res.list]\n      list.value = newList\n      // 补充新加载项的 loading 状态\n      res.list.forEach((_, i) => {\n        imageLoading.value[list.value.length - res.list.length + i] = true\n        imageError.value[list.value.length - res.list.length + i] = false\n      })\n    }\n    \n    if (list.value.length >= res.total) {\n      hasMore.value = false\n    } else {\n      pageNum.value++\n    }\n  } catch (e) {\n    console.error(e)\n  }\n}\n\n// 辅助函数：获取极小缩略图作为加载占位\nfunction getSmallUrl(url) {\n  if (url.includes('pexels.com')) {\n    // Pexels 支持动态尺寸，请求 50px 宽的极小图配合模糊滤镜\n    return url.split('?')[0] + '?auto=compress&cs=tinysrgb&w=50';\n  }\n  // 其他来源若不支持动态缩略图，则返回原图，利用其作为背景渲染\n  return url;\n}\n\nfunction shouldRender(index) {\n  // 兼顾性能与流畅度：前后各预留 2 张 (共预加载 5 张)\n  return Math.abs(index - currentSwiperIndex.value) <= 2\n}\n\nfunction onSwiperChange(e) {\n  const index = e.detail.current\n  currentSwiperIndex.value = index\n  \n  // 记录历史\n  if (list.value[index]) {\n    userStore.addHistory(list.value[index])\n  }\n  \n  // 预加载逻辑：当滑动到倒数第2张且还有更多数据时，加载下一页\n  if (hasMore.value && index >= list.value.length - 2) {\n    loadData(false)\n  }\n}\n\nfunction onImageLoad(index) {\n  // 使用 Vue reactive 特性，直接给对象属性赋值也能触发更新，\n  // 为了万无一失，我们使用新对象触发全量检测\n  imageLoading.value = { ...imageLoading.value, [index]: false }\n}\n\nfunction onImageError(index) {\n  imageLoading.value = { ...imageLoading.value, [index]: false }\n  imageError.value = { ...imageError.value, [index]: true }\n  console.error(`图片 ${index} 加载失败`);\n}\n\nfunction retryLoadImage(index, url) {\n  imageError.value = { ...imageError.value, [index]: false }\n  imageLoading.value = { ...imageLoading.value, [index]: true }\n  \n  uni.downloadFile({\n    url: url,\n    success: (res) => {\n      if (res.statusCode === 200) {\n        onImageLoad(index)\n      } else {\n        onImageError(index)\n      }\n    },\n    fail: () => {\n      onImageError(index)\n    }\n  })\n}\n\nfunction toggleInfo() {\n  showInfo.value = !showInfo.value\n}\n\nfunction goBack() {\n  uni.navigateBack()\n}\n\nfunction isFavorite(id) {\n  return userStore.favorites.some(f => f.id === id)\n}\n\nconst handleFavorite = throttle((item) => {\n  if (isFavorite(item.id)) {\n    userStore.removeFavorite(item.id)\n    uni.showToast({ title: '已取消', icon: 'none' })\n  } else {\n    userStore.addFavorite(item)\n    uni.showToast({ title: '已收藏' })\n  }\n}, 500)\n\nconst handleDownload = throttle(async (item) => {\n  // #ifdef H5\n  uni.showToast({ title: '长按图片即可保存', icon: 'none' });\n  return;\n  // #endif\n\n  // #ifdef MP-WEIXIN\n  try {\n    uni.showLoading({ title: '准备下载...', mask: true });\n\n    await checkAndRequestAuth();\n\n    uni.showLoading({ title: '下载中...', mask: true });\n\n    const downloadRes = await uni.downloadFile({\n      url: item.pic_url,\n      timeout: 30000\n    });\n\n    if (downloadRes.statusCode === 200) {\n      uni.hideLoading();\n\n      const saveImage = () => {\n        uni.saveImageToPhotosAlbum({\n          filePath: downloadRes.tempFilePath,\n          success: () => {\n            uni.showModal({\n              title: '保存成功',\n              content: '壁纸已保存到系统相册，快去设置为壁纸吧~',\n              showCancel: false\n            });\n            userStore.addDownload(item);\n          },\n          fail: (err) => {\n            console.error('保存失败:', err);\n            if (err.errMsg && (err.errMsg.includes('auth deny') || err.errMsg.includes('auth denied'))) {\n              uni.showModal({\n                title: '需要授权',\n                content: '需要您授权保存相册权限才能下载壁纸',\n                confirmText: '去授权',\n                success: (res) => {\n                  if (res.confirm) {\n                    uni.openSetting({\n                      success: (settingRes) => {\n                        if (settingRes.authSetting['scope.writePhotosAlbum']) {\n                          saveImage();\n                        } else {\n                          uni.showToast({ title: '未授权，无法保存', icon: 'none' });\n                        }\n                      },\n                      fail: () => {\n                        uni.showToast({ title: '打开设置失败', icon: 'none' });\n                      }\n                    });\n                  }\n                }\n              });\n            } else {\n              uni.showToast({ title: '保存失败: ' + (err.errMsg || '未知错误'), icon: 'none', duration: 3000 });\n            }\n          }\n        });\n      };\n\n      saveImage();\n    } else {\n      throw new Error(`下载失败，状态码: ${downloadRes.statusCode}`);\n    }\n  } catch (err) {\n    uni.hideLoading();\n    console.error('下载错误:', err);\n    \n    if (err.message === '用户取消' || err.message === '未授权') {\n      return;\n    }\n    \n    let errorMsg = '下载失败';\n    if (err.errMsg) {\n      if (err.errMsg.includes('fail timeout')) {\n        errorMsg = '下载超时，请检查网络';\n      } else if (err.errMsg.includes('fail')) {\n        errorMsg = '网络错误，请重试';\n      } else if (err.errMsg.includes('url not in domain list')) {\n        errorMsg = '图片域名未配置，请联系开发者';\n      } else if (err.errMsg.includes('fail:download')) {\n        errorMsg = '下载失败，请检查网络连接';\n      } else {\n        errorMsg = err.errMsg;\n      }\n    }\n    \n    uni.showToast({ title: errorMsg, icon: 'none', duration: 3000 });\n  }\n  // #endif\n\n  // #ifndef MP-WEIXIN\n  uni.showLoading({ title: '下载中...', mask: true });\n  \n  try {\n    const downloadRes = await uni.downloadFile({\n      url: item.pic_url,\n      timeout: 30000\n    });\n    \n    if (downloadRes.statusCode === 200) {\n      await uni.saveImageToPhotosAlbum({\n        filePath: downloadRes.tempFilePath\n      });\n      \n      uni.hideLoading();\n      uni.showModal({\n        title: '保存成功',\n        content: '壁纸已保存到系统相册，快去设置为壁纸吧~',\n        showCancel: false\n      });\n      userStore.addDownload(item);\n    } else {\n      throw new Error(`下载失败，状态码: ${downloadRes.statusCode}`);\n    }\n  } catch (err) {\n    uni.hideLoading();\n    console.error('下载错误:', err);\n    \n    let errorMsg = '下载失败';\n    if (err.errMsg) {\n      if (err.errMsg.includes('auth deny') || err.errMsg.includes('auth denied')) {\n        uni.showModal({\n          title: '需要授权',\n          content: '需要保存相册权限才能下载壁纸',\n          confirmText: '去设置',\n          success: (res) => {\n            if (res.confirm) {\n              uni.openSetting({\n                fail: () => {\n                  uni.showToast({ title: '打开设置失败', icon: 'none' });\n                }\n              });\n            }\n          }\n        });\n        return;\n      } else if (err.errMsg.includes('fail timeout')) {\n        errorMsg = '下载超时，请检查网络';\n      } else if (err.errMsg.includes('fail')) {\n        errorMsg = '网络错误，请重试';\n      } else if (err.errMsg.includes('url not in domain list')) {\n        errorMsg = '图片域名未配置，请联系开发者';\n      } else {\n        errorMsg = err.errMsg;\n      }\n    }\n    \n    uni.showToast({ title: errorMsg, icon: 'none', duration: 3000 });\n  }\n  // #endif\n}, 1000)\n\nconst checkAndRequestAuth = () => {\n  return new Promise((resolve, reject) => {\n    uni.getSetting({\n      success: (res) => {\n        if (res.authSetting['scope.writePhotosAlbum']) {\n          resolve(true);\n        } else if (res.authSetting['scope.writePhotosAlbum'] === false) {\n          uni.showModal({\n            title: '需要授权',\n            content: '需要您授权保存相册权限才能下载壁纸',\n            confirmText: '去授权',\n            success: (modalRes) => {\n              if (modalRes.confirm) {\n                uni.openSetting({\n                  success: (settingRes) => {\n                    if (settingRes.authSetting['scope.writePhotosAlbum']) {\n                      resolve(true);\n                    } else {\n                      reject(new Error('未授权'));\n                    }\n                  },\n                  fail: () => {\n                    reject(new Error('打开设置失败'));\n                  }\n                });\n              } else {\n                reject(new Error('用户取消'));\n              }\n            }\n          });\n        } else {\n          uni.authorize({\n            scope: 'scope.writePhotosAlbum',\n            success: () => {\n              resolve(true);\n            },\n            fail: () => {\n              uni.showModal({\n                title: '需要授权',\n                content: '需要您授权保存相册权限才能下载壁纸',\n                confirmText: '去授权',\n                success: (modalRes) => {\n                  if (modalRes.confirm) {\n                    uni.openSetting({\n                      success: (settingRes) => {\n                        if (settingRes.authSetting['scope.writePhotosAlbum']) {\n                          resolve(true);\n                        } else {\n                          reject(new Error('未授权'));\n                        }\n                      },\n                      fail: () => {\n                        reject(new Error('打开设置失败'));\n                      }\n                    });\n                  } else {\n                    reject(new Error('用户取消'));\n                  }\n                }\n              });\n            }\n          });\n        }\n      },\n      fail: () => {\n        reject(new Error('获取设置失败'));\n      }\n    });\n  });\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.preview-page { \n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100vw; \n  height: 100vh; \n  background: #050505; \n  overflow: hidden; // 禁止页面级滚动\n  z-index: 999;\n}\n.full-swiper { width: 100%; height: 100%; }\n.wall-container { \n  width: 100%; \n  height: 100%; \n  position: relative; \n  overflow: hidden; // 禁止内部容器滚动\n}\n.full-image { \n  width: 100%; \n  height: 100%; \n  display: block; \n  position: relative;\n  z-index: 2;\n  background: #1a1a1a;\n}\n\n.blur-placeholder {\n  position: absolute;\n  inset: 0;\n  width: 100%;\n  height: 100%;\n  filter: blur(40px);\n  transform: scale(1.1);\n  z-index: 1;\n  background: #1a1a1a;\n  transition: opacity 0.5s ease;\n}\n\n.error-placeholder {\n  position: absolute;\n  inset: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #1a1a1a;\n  z-index: 2;\n  gap: 20rpx;\n  \n  .error-icon {\n    opacity: 0.5;\n  }\n  \n  .error-text {\n    font-size: 28rpx;\n    color: #999;\n  }\n  \n  .retry-text {\n    font-size: 24rpx;\n    color: $brand-color;\n    margin-top: 10rpx;\n  }\n}\n\n.loading-state { position: absolute; inset: 0; @include flex-center; .spinner { width: 60rpx; height: 60rpx; border: 4rpx solid rgba(255,255,255,0.05); border-top-color: $brand-color; border-radius: 50%; animation: spin 1s linear infinite; } }\n\n.content-overlay { position: absolute; inset: 0; z-index: 10; }\n.top-gradient { position: absolute; top: 0; left: 0; right: 0; height: 20vh; background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent); }\n.bottom-gradient { position: absolute; bottom: 0; left: 0; right: 0; height: 40vh; background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%); }\n\n.nav-bar {\n  position: relative; z-index: 20; display: flex; align-items: center; padding: 0 40rpx; height: 100rpx;\n  .back-btn { width: 80rpx; height: 80rpx; border-radius: 50%; background: rgba(0,0,0,0.2); backdrop-filter: blur(20rpx); @include flex-center; }\n  \n  .counter-badge {\n    position: absolute; left: 50%; transform: translateX(-50%);\n    background: rgba(0,0,0,0.3); backdrop-filter: blur(10rpx); padding: 6rpx 24rpx; border-radius: 30rpx; display: flex; align-items: center; gap: 4rpx;\n    .curr { color: #fff; font-size: 32rpx; font-weight: 700; }\n    .divider { color: rgba(255,255,255,0.4); font-size: 24rpx; margin: 0 4rpx; }\n    .total { color: rgba(255,255,255,0.6); font-size: 24rpx; }\n  }\n}\n\n.side-actions {\n  position: absolute; right: 30rpx; bottom: 320rpx; z-index: 20; display: flex; flex-direction: column; gap: 30rpx;\n  .action-item {\n    display: flex; flex-direction: column; align-items: center; gap: 6rpx;\n    .icon-box {\n      width: 90rpx; height: 90rpx; background: rgba(255,255,255,0.1); backdrop-filter: blur(30rpx); border-radius: 50%; @include flex-center;\n      &.active { background: rgba(255, 71, 87, 0.15); border: 2rpx solid rgba(255, 71, 87, 0.2); }\n    }\n    text { color: #fff; font-size: 20rpx; opacity: 0.9; }\n  }\n}\n\n.bottom-panel {\n  position: absolute; left: 0; right: 0; bottom: 0; padding: 40rpx 40rpx calc(40rpx + env(safe-area-inset-bottom)); z-index: 20;\n  .panel-header {\n    display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 24rpx;\n    .title { font-size: 40rpx; font-weight: 900; color: #fff; margin-bottom: 8rpx; display: block; }\n    .tags { display: flex; gap: 12rpx; text { font-size: 20rpx; color: $brand-color; font-weight: 700; background: rgba(40,179,137,0.15); padding: 4rpx 14rpx; border-radius: 6rpx; } }\n    .score-badge { background: rgba(255,215,0,0.1); color: #ffd700; font-size: 32rpx; font-weight: 900; padding: 4rpx 16rpx; border-radius: 12rpx; }\n  }\n  .desc { font-size: 26rpx; color: rgba(255,255,255,0.6); line-height: 1.6; margin-bottom: 30rpx; display: block; }\n  .swipe-tip { text-align: center; color: rgba(255,255,255,0.3); font-size: 20rpx; letter-spacing: 4rpx; }\n}\n\n.wallpaper-id {\n  position: absolute;\n  right: 30rpx;\n  bottom: calc(40rpx + env(safe-area-inset-bottom)); // 位于底部面板上方或边缘\n  font-size: 22rpx;\n  color: rgba(255, 255, 255, 0.5); // 保持较清晰的可见度\n  z-index: 30; // 提升层级，确保不被任何底层元素覆盖\n  pointer-events: none;\n  font-family: monospace;\n  text-shadow: 0 2rpx 4rpx rgba(0,0,0,0.3); // 阴影增强识别\n}\n\n@keyframes spin { to { transform: rotate(360deg); } }\n</style>","import MiniProgramPage from 'D:/HBuilderPrograms/qingpingWallapaper/pages/preview/preview.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","ref","uni","onMounted","getWallpaperList","throttle"],"mappings":"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"}