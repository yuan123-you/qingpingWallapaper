{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../HBuilder X/HBuilderX.4.87.2025121004/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"login-box\">\n      <view class=\"logo-area\">\n        <view class=\"logo-icon\">LS</view>\n        <text class=\"title\">LightScreen</text>\n        <text class=\"subtitle\">让屏幕重焕光彩的力量</text>\n      </view>\n\n      <view class=\"btn-group\">\n        <button class=\"wechat-btn\" @click=\"handleWechatLogin\" :loading=\"wechatLoading\">\n          <uni-icons type=\"weixin\" size=\"24\" color=\"#fff\" style=\"margin-right: 12rpx;\"></uni-icons>\n          微信一键登录\n        </button>\n        <text class=\"agreement\">登录即代表同意《用户协议》与《隐私政策》</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useUserStore } from '@/stores/user'\n\nconst userStore = useUserStore()\nconst wechatLoading = ref(false)\n\nasync function handleWechatLogin() {\n  if (wechatLoading.value) return\n  \n  wechatLoading.value = true\n  \n  try {\n    uni.showLoading({ title: '安全登录中...' })\n    \n    const loginRes = await new Promise((resolve, reject) => {\n      uni.login({\n        provider: 'weixin',\n        success: resolve,\n        fail: reject\n      })\n    })\n    \n    uni.hideLoading()\n    \n    const code = loginRes.code\n    // 模拟微信登录逻辑，实际环境中应发送 code 到服务器换取 token\n    \n    userStore.setUserInfo({\n      nickname: '微信用户',\n      avatarUrl: '/static/default_avatar.png'\n    })\n    userStore.setToken('wechat_token_' + code)\n    \n    uni.showToast({ title: '欢迎回来', icon: 'success' })\n    \n    setTimeout(() => {\n      uni.switchTab({ url: '/pages/index/index' })\n    }, 1500)\n  } catch (err) {\n    uni.hideLoading()\n    console.error(err)\n    uni.showToast({ title: '登录服务异常', icon: 'none' })\n  } finally {\n    wechatLoading.value = false\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  height: 100vh;\n  background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);\n  @include flex-center;\n  padding: 60rpx;\n}\n\n.login-box {\n  width: 100%;\n  animation: fadeIn 0.8s ease-out;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 60vh; \n}\n\n.logo-area {\n  @include flex-center;\n  flex-direction: column;\n  margin-top: 60rpx;\n  \n  .logo-icon {\n    width: 160rpx;\n    height: 160rpx;\n    background: $brand-gradient;\n    border-radius: 46rpx;\n    @include flex-center;\n    color: #fff;\n    font-size: 70rpx;\n    font-weight: 900;\n    box-shadow: 0 30rpx 60rpx rgba(40, 179, 137, 0.25);\n    margin-bottom: 40rpx;\n  }\n  \n  .title {\n    font-size: 60rpx;\n    font-weight: 900;\n    color: #1a1a1a;\n    letter-spacing: -2rpx;\n    margin-bottom: 16rpx;\n  }\n  \n  .subtitle {\n    font-size: 28rpx;\n    color: #999;\n    letter-spacing: 2rpx;\n  }\n}\n\n.btn-group {\n  width: 100%;\n  .wechat-btn {\n    width: 100%;\n    height: 110rpx;\n    background: #07c160;\n    border-radius: 55rpx;\n    color: #fff;\n    font-size: 32rpx;\n    font-weight: 700;\n    @include flex-center;\n    border: none;\n    box-shadow: 0 20rpx 40rpx rgba(7, 193, 96, 0.2);\n    margin-bottom: 30rpx;\n    \n    &::after { display: none; }\n    &:active { transform: scale(0.98); opacity: 0.9; }\n  }\n  \n  .agreement {\n    font-size: 22rpx;\n    color: #ccc;\n    text-align: center;\n    display: block;\n  }\n}\n\n@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n</style>","import MiniProgramPage from 'D:/HBuilderPrograms/qingpingWallapaper/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","ref","uni"],"mappings":";;;;;;;;;;;;;;AAwBA,UAAM,YAAYA,YAAAA,aAAc;AAChC,UAAM,gBAAgBC,cAAG,IAAC,KAAK;AAE/B,mBAAe,oBAAoB;AACjC,UAAI,cAAc;AAAO;AAEzB,oBAAc,QAAQ;AAEtB,UAAI;AACFC,sBAAAA,MAAI,YAAY,EAAE,OAAO,WAAU,CAAE;AAErC,cAAM,WAAW,MAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtDA,wBAAAA,MAAI,MAAM;AAAA,YACR,UAAU;AAAA,YACV,SAAS;AAAA,YACT,MAAM;AAAA,UACd,CAAO;AAAA,QACP,CAAK;AAEDA,sBAAAA,MAAI,YAAa;AAEjB,cAAM,OAAO,SAAS;AAGtB,kBAAU,YAAY;AAAA,UACpB,UAAU;AAAA,UACV,WAAW;AAAA,QACjB,CAAK;AACD,kBAAU,SAAS,kBAAkB,IAAI;AAEzCA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,WAAW;AAEhD,mBAAW,MAAM;AACfA,wBAAAA,MAAI,UAAU,EAAE,KAAK,qBAAoB,CAAE;AAAA,QAC5C,GAAE,IAAI;AAAA,MACR,SAAQ,KAAK;AACZA,sBAAAA,MAAI,YAAa;AACjBA,sBAAAA,oDAAc,GAAG;AACjBA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAAA,MACnD,UAAY;AACR,sBAAc,QAAQ;AAAA,MACvB;AAAA,IACH;;;;;;;;;;;;;;;ACjEA,GAAG,WAAW,eAAe;"}