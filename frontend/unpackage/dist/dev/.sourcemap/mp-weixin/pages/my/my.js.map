{"version":3,"file":"my.js","sources":["pages/my/my.vue","../../../HBuilder X/HBuilderX.4.87.2025121004/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<template>\n  <view class=\"page-bg\">\n    <view class=\"my-container\">\n      <view class=\"user-info\">\n        <view class=\"user-avatar\" @click=\"handleAvatarClick\">\n          <image v-if=\"userInfo.avatarUrl\" class=\"avatar-image\" :src=\"userInfo.avatarUrl\" mode=\"aspectFill\"></image>\n          <text v-else class=\"avatar-placeholder\">üë§</text>\n        </view>\n        <view class=\"user-detail\">\n          <text class=\"user-name\">{{ userInfo.nickName || 'ÁÇπÂáªÁôªÂΩï' }}</text>\n          <text class=\"user-id\">ID: {{ userInfo.openid || '---' }}</text>\n        </view>\n      </view>\n\n      <view class=\"my-stats\">\n        <view class=\"stat-item\" @click=\"goToFavorites\">\n          <text class=\"stat-value\">{{ favorites.length }}</text>\n          <text class=\"stat-label\">Êî∂Ëóè</text>\n        </view>\n        <view class=\"stat-item\" @click=\"goToHistory\">\n          <text class=\"stat-value\">{{ history.length }}</text>\n          <text class=\"stat-label\">ÊµèËßà</text>\n        </view>\n      </view>\n\n      <view class=\"my-menu\">\n        <view class=\"menu-item\" @click=\"goToFavorites\">\n          <view class=\"menu-item-left\">\n            <text class=\"menu-icon\">‚ô•</text>\n            <text class=\"menu-title\">ÊàëÁöÑÊî∂Ëóè</text>\n          </view>\n          <text class=\"menu-arrow\">‚Ä∫</text>\n        </view>\n        <view class=\"menu-item\" @click=\"goToHistory\">\n          <view class=\"menu-item-left\">\n            <text class=\"menu-icon\">üïê</text>\n            <text class=\"menu-title\">ÊµèËßàÂéÜÂè≤</text>\n          </view>\n          <text class=\"menu-arrow\">‚Ä∫</text>\n        </view>\n        <view class=\"menu-item\" @click=\"clearHistory\">\n          <view class=\"menu-item-left\">\n            <text class=\"menu-icon\">üóëÔ∏è</text>\n            <text class=\"menu-title\">Ê∏ÖÈô§ÁºìÂ≠ò</text>\n          </view>\n          <text class=\"menu-arrow\">‚Ä∫</text>\n        </view>\n        <view class=\"menu-item\" @click=\"handleLogout\" v-if=\"userInfo.openid\">\n          <view class=\"menu-item-left\">\n            <text class=\"menu-icon\">üö™</text>\n            <text class=\"menu-title\">ÈÄÄÂá∫ÁôªÂΩï</text>\n          </view>\n          <text class=\"menu-arrow\">‚Ä∫</text>\n        </view>\n        <button class=\"menu-item\" open-type=\"contact\">\n          <view class=\"menu-item-left\">\n            <text class=\"menu-icon\">üí¨</text>\n            <text class=\"menu-title\">ËÅîÁ≥ªÂÆ¢Êúç</text>\n          </view>\n          <text class=\"menu-arrow\">‚Ä∫</text>\n        </button>\n      </view>\n\n      <view class=\"version-info\">\n        <text>ÁâàÊú¨ 2.0.0</text>\n      </view>\n    </view>\n    <view class=\"safe-area-bottom\"></view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useUserStore } from '@/stores/user'\n\nconst userStore = useUserStore()\n\nconst userInfo = computed(() => userStore.userInfo || {})\nconst favorites = computed(() => userStore.favorites || [])\nconst history = computed(() => userStore.history || [])\n\nonMounted(() => {\n  loadUserInfo()\n})\n\nfunction loadUserInfo() {\n  if (!userStore.userInfo) {\n    userStore.initUserInfo()\n  }\n}\n\nfunction handleAvatarClick() {\n  if (!userStore.userInfo || !userStore.userInfo.openid) {\n    uni.navigateTo({\n      url: '/pages/login/login'\n    })\n  } else {\n    uni.chooseImage({\n      count: 1,\n      sizeType: ['compressed'],\n      sourceType: ['album', 'camera'],\n      success: (res) => {\n        const tempFilePath = res.tempFilePaths[0]\n        userStore.updateAvatar(tempFilePath)\n        uni.showToast({\n          title: 'Â§¥ÂÉèÊõ¥Êñ∞ÊàêÂäü',\n          icon: 'success'\n        })\n      },\n      fail: (err) => {\n        console.error('ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•', err)\n      }\n    })\n  }\n}\n\nfunction goToFavorites() {\n  uni.navigateTo({\n    url: '/pages/my/favorites'\n  })\n}\n\nfunction goToHistory() {\n  uni.navigateTo({\n    url: '/pages/my/history'\n  })\n}\n\nfunction clearHistory() {\n  uni.showModal({\n    title: 'ÊèêÁ§∫',\n    content: 'Á°ÆÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÁºìÂ≠òÂêóÔºü',\n    success: (res) => {\n      if (res.confirm) {\n        userStore.clearHistory()\n        uni.showToast({\n          title: 'Ê∏ÖÈô§ÊàêÂäü',\n          icon: 'success'\n        })\n      }\n    }\n  })\n}\n\nfunction handleLogout() {\n  uni.showModal({\n    title: 'ÊèêÁ§∫',\n    content: 'Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü',\n    success: (res) => {\n      if (res.confirm) {\n        userStore.logout()\n        uni.showToast({\n          title: 'Â∑≤ÈÄÄÂá∫ÁôªÂΩï',\n          icon: 'success'\n        })\n      }\n    }\n  })\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.my-container {\n  min-height: 100vh;\n  padding: 30rpx;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  padding: 40rpx 30rpx;\n  background: #fff;\n  border-radius: 16rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.08);\n  position: relative;\n}\n\n.user-avatar {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 50%;\n  margin-right: 30rpx;\n  position: relative;\n  background: #f0f0f0;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.avatar-image {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n}\n\n.avatar-placeholder {\n  font-size: 60rpx;\n  color: #999;\n}\n\n.user-detail {\n  flex: 1;\n}\n\n.user-name {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #333;\n  display: block;\n  margin-bottom: 10rpx;\n}\n\n.user-id {\n  font-size: 24rpx;\n  color: #666;\n}\n\n.my-stats {\n  display: flex;\n  gap: 20rpx;\n  margin-bottom: 30rpx;\n}\n\n.stat-item {\n  flex: 1;\n  background: #fff;\n  border-radius: 16rpx;\n  padding: 30rpx;\n  text-align: center;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.08);\n}\n\n.stat-value {\n  font-size: 48rpx;\n  font-weight: 600;\n  color: #28b389;\n  display: block;\n  margin-bottom: 10rpx;\n}\n\n.stat-label {\n  font-size: 24rpx;\n  color: #666;\n}\n\n.my-menu {\n  background: #fff;\n  border-radius: 16rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.08);\n}\n\n.menu-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 30rpx;\n  border-bottom: 1rpx solid #F5F5F5;\n}\n\n.menu-item:last-child {\n  border-bottom: none;\n}\n\n.menu-item-left {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.menu-icon {\n  font-size: 40rpx;\n}\n\n.menu-title {\n  font-size: 28rpx;\n  color: #333;\n}\n\n.menu-arrow {\n  font-size: 40rpx;\n  color: #999;\n}\n\n.version-info {\n  text-align: center;\n  padding: 30rpx;\n  color: #999;\n  font-size: 24rpx;\n}\n\n.safe-area-bottom {\n  height: constant(safe-area-inset-bottom);\n  height: env(safe-area-inset-bottom);\n}\n</style>\n","import MiniProgramPage from 'D:/HBuilderPrograms/qingpingWallapaper/frontend/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","computed","onMounted","uni"],"mappings":";;;;;;AA2EA,UAAM,YAAYA,YAAAA,aAAc;AAEhC,UAAM,WAAWC,cAAAA,SAAS,MAAM,UAAU,YAAY,CAAA,CAAE;AACxD,UAAM,YAAYA,cAAAA,SAAS,MAAM,UAAU,aAAa,CAAA,CAAE;AAC1D,UAAM,UAAUA,cAAAA,SAAS,MAAM,UAAU,WAAW,CAAA,CAAE;AAEtDC,kBAAAA,UAAU,MAAM;AACd,mBAAc;AAAA,IAChB,CAAC;AAED,aAAS,eAAe;AACtB,UAAI,CAAC,UAAU,UAAU;AACvB,kBAAU,aAAc;AAAA,MACzB;AAAA,IACH;AAEA,aAAS,oBAAoB;AAC3B,UAAI,CAAC,UAAU,YAAY,CAAC,UAAU,SAAS,QAAQ;AACrDC,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK;AAAA,QACX,CAAK;AAAA,MACL,OAAS;AACLA,sBAAAA,MAAI,YAAY;AAAA,UACd,OAAO;AAAA,UACP,UAAU,CAAC,YAAY;AAAA,UACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,UAC9B,SAAS,CAAC,QAAQ;AAChB,kBAAM,eAAe,IAAI,cAAc,CAAC;AACxC,sBAAU,aAAa,YAAY;AACnCA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,YAChB,CAAS;AAAA,UACF;AAAA,UACD,MAAM,CAAC,QAAQ;AACbA,0BAAAA,+CAAc,UAAU,GAAG;AAAA,UAC5B;AAAA,QACP,CAAK;AAAA,MACF;AAAA,IACH;AAEA,aAAS,gBAAgB;AACvBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAEA,aAAS,cAAc;AACrBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAEA,aAAS,eAAe;AACtBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,sBAAU,aAAc;AACxBA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,YAChB,CAAS;AAAA,UACF;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAEA,aAAS,eAAe;AACtBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,sBAAU,OAAQ;AAClBA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,YAChB,CAAS;AAAA,UACF;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;AC7JA,GAAG,WAAW,eAAe;"}